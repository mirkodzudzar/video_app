{% extends "admin/base.html.twig" %}

{% block mainadmin %}

{% for label, messages in app.flashes %}
    {% for message in messages %}
        <div class="alert alert-{{label}}" role="alert">
            {{message}}
        </div>
    {% endfor %}
{% endfor %}

<h2>My profile <small><a onclick="return confirm('Are you sure?');" href="{{path('delete_account')}}">delete account</a></small></h2>
{# {% if not is_granted('ROLE_ADMIN') %}
    <p class="text-left">My plan - Pro. <a onclick="return confirm('Are you sure? This can not be undone. Remember also to cancel payment in your PayPal account.');"
            href="#">cancel plan</a></p>
    <p class="text-left">My plan - Free. <a href="{{path('payment')}}">get paid plan</a></p>
{% endif %} #}
{% if not is_granted('ROLE_ADMIN') and subscription and subscription.getPlan in subscription.getPlanDataNames %}
    <p class="text-left">My plan - {{subscription.getPlan|upper}}. <b>Valid to:<b> {{subscription.validTo|date('Y-m-d')}}.
    {% if subscription.validTo == null or subscription.paymentStatus == null %}
        Plan is not active <a href="{{path('payment')}}">pay for plan</a> |
    {% endif %}
    {% if subscription.getPlan == subscription.getPlanDataNameByIndex(0) %}
        <a href="{{path('pricing')}}">get paid plan</a> |
    {% endif %}
    <a onclick="return confirm('Are you sure? This can not be undone. Remember also to cancel payment in your PayPal account.');"
            href="{{path('cancel_plan')}}">cancel plan</a></p>
{% elseif not is_granted('ROLE_ADMIN') %}
    <p class="text-left">You don't have any plan. <a href="{{path('pricing')}}">Get plan</a></p>
{% endif %}

{# <form class="mt-5" method="POST" action="#"> #}
{{form_start(form, {'attr': {'novalidate': 'novalidate'}})}}
    {% if is_granted('ROLE_ADMIN') %}
        <div class="form-group">
            {{form_label(form.vimeo_api_key)}}
            {{form_widget(form.vimeo_api_key, {'attr': {'class': is_invalid}})}}
            <div class="invalid-feedback">
                {{form_errors(form.vimeo_api_key)}}
            </div>
        </div>
    {% endif %}
    <div class="form-group">
        {{form_label(form.name)}}
        {{form_widget(form.name, {'attr': {'class': is_invalid}})}}
        <div class="invalid-feedback">
            {{form_errors(form.name)}}
        </div>
    </div>
    <div class="form-group">
        {{form_label(form.last_name)}}
        {{form_widget(form.last_name, {'attr': {'class': is_invalid}})}}
        <div class="invalid-feedback">
            {{form_errors(form.last_name)}}
        </div>
    </div>
    <div class="form-group">
        {{form_label(form.email)}}
        {{form_widget(form.email, {'attr': {'class': is_invalid}})}}
        <div class="invalid-feedback">
            {{form_errors(form.email)}}
        </div>
    </div>
    <div class="form-group">
        {{form_label(form.password.first)}}
        {{form_widget(form.password.first, {'attr': {'class': is_invalid}})}}
        <div class="invalid-feedback">
            {{form_errors(form.password.first)}}
        </div>
    </div>
    <div class="form-group">
        {{form_label(form.password.second)}}
        {{form_widget(form.password.second, {'attr': {'class': is_invalid}})}}
        <div class="invalid-feedback">
            {{form_errors(form.password.second)}}
        </div>
    </div>
    {{form_widget(form.save, {'attr': {'class': 'btn btn-primary btn-lg btn-block'}})}}
{{ form_end(form) }}

    {# <button type="submit" class="btn btn-primary">Save</button>
</form> #}
{% endblock %}